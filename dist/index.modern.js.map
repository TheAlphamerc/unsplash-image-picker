{"version":3,"file":"index.modern.js","sources":["../src/component/modal.tsx","../src/component/photo-list.component.tsx","../src/component/search-bar.component.tsx","../src/component/unsplash-modal.component.tsx","../src/index.tsx"],"sourcesContent":["import cx from 'classnames'\nimport React from 'react'\n\nexport default function Modal({\n  children,\n  className = '',\n  width = 540,\n  padding = true,\n  active = false,\n  setActive = function (_e: any) {},\n  ...props\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={(_e) => {\n        if (active) {\n          setActive(false)\n        } else {\n          setActive(true)\n        }\n      }}\n      onKeyUp={(e) => {\n        if (e.key === 'Escape') {\n          setActive(false)\n        }\n      }}\n      className={cx(`Modal`, {\n        active: active\n      })}\n      {...props}\n    >\n      <div className='flex' style={{ maxHeight: '90vh' }}>\n        <Card\n          onClick={(e: any) => {\n            // stop the card being closed when we click on inner divs\n            if (active) {\n              e.stopPropagation()\n            }\n          }}\n          padding={padding}\n          className={`overflow-hidden `}\n          style={{ maxWidth: width, width: '100%' }}\n        >\n          {children}\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nfunction Card({\n  children,\n  padding = true,\n  className = '',\n  style = {},\n  onClick = (_: any) => {}\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      style={style}\n      className={cx('Card rounded shadow bg-white mx-auto my-auto', {\n        'p-4': padding\n      })}\n    >\n      {children}\n    </div>\n  )\n}\n","import React from 'react'\n\ninterface Props {\n  isLoading?: boolean\n  photoList: Array<any>\n  onPhotoSelect: (photo: any) => void\n  loadMore: (page: number, query: string) => void\n}\nfunction PhotoList({\n  isLoading = false,\n  photoList,\n  onPhotoSelect,\n  loadMore\n}: Props) {\n  return (\n    <div className=''>\n      <InfiniteScroll\n        pageStart={0}\n        loadMore={loadMore}\n        loader={<p key='0'>Loading more photos...</p>}\n      >\n        {isLoading ? (\n          <div className='flex items-center justify-center h-96'>\n            Loading photos\n          </div>\n        ) : (\n          <div className='card-columns mt-4'>\n            {photoList &&\n              photoList.map((pic: any) => {\n                return (\n                  <div\n                    className='group relative card border-0 mb-2 cursor-pointer'\n                    key={pic.id}\n                    onClick={() => onPhotoSelect(pic)}\n                  >\n                    <img\n                      className='card-img'\n                      src={pic.urls.small}\n                      alt={pic.alt_description}\n                    />\n                    <div\n                      className='absolute top-2 right-1 left-1 invisible group-hover:visible '\n                      style={{ color: 'white' }}\n                    >\n                      <div className='flex items-center justify-between'>\n                        <div className='flex items-center space-x-1'>\n                          <img\n                            className='rounded-full h-6 w-6'\n                            src={pic.user.profile_image.small}\n                            alt={pic.user.username}\n                          />\n                          <h6 className='text-xs'>{pic.user.name}</h6>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n          </div>\n        )}\n        {photoList && photoList.length === 0 && <div className='h-96' />}\n      </InfiniteScroll>\n    </div>\n  )\n}\n\n/**\n * Infinite scroll component\n */\nfunction InfiniteScroll({ pageStart, loadMore, loader, children }: any) {\n  // eslint-disable-next-line no-unused-vars\n  const [isLoading, setIsLoading] = React.useState<boolean>(false)\n  // eslint-disable-next-line no-unused-vars\n  const [page, setPage] = React.useState(pageStart)\n  React.useEffect(() => {\n    const callBack = () => {\n      if (\n        window.innerHeight + window.scrollY + 100 >=\n        document.body.offsetHeight\n      ) {\n        console.log('load more')\n        if (!isLoading) {\n          // loadMoreItems();\n          loadMore(page + 1)\n        }\n      }\n    }\n    window.addEventListener('scroll', callBack)\n    return () => {\n      window.removeEventListener('scroll', callBack)\n    }\n  }, [pageStart])\n\n  return (\n    <div>\n      {children}\n      {isLoading && loader}\n    </div>\n  )\n}\n\nexport default PhotoList\n","import React from 'react'\n\ninterface Props {\n  query: string\n  setQuery: (query: string) => void\n  onSearch: (query: string) => void\n}\nfunction SearchBar({ setQuery, query, onSearch }: Props) {\n  const searchPhotos = async (e: any) => {\n    e.preventDefault()\n    onSearch(query)\n  }\n\n  return (\n    <div>\n      <div>\n        <form onSubmit={searchPhotos} className='flex items-center space-x-2'>\n          <label className=' w-full'>\n            <input\n              className='placeholder:italic placeholder:theme-text-subtitle-1  w-full border theme-border-default rounded-md py-2 pl-3 pr-3  focus:outline-none focus:theme-border-primary  focus:ring-1 sm:text-sm'\n              placeholder='Search for an image'\n              type='text'\n              name='search'\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n            />\n          </label>\n          <span>\n            {/* <Button label={'Search'} onClick={searchPhotos} /> */}\n            <button\n              className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md'\n              type='submit'\n            >\n              Search\n            </button>\n          </span>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SearchBar\n","import React from 'react'\nimport Modal from './modal'\nimport PhotoList from './photo-list.component'\nimport SearchBar from './search-bar.component'\ninterface Props {\n  unsplash: any\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport default function UnsplashImagePickerComponent({\n  unsplash,\n  active = false,\n  setActive = (_: boolean) => {}\n}: Props) {\n  const [pics, setPics] = React.useState<any[]>([])\n  const [query, setQuery] = React.useState('')\n  const [isLoading, setIsLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    fetchPhotos(1, query)\n  }, [])\n\n  const fetchPhotos = (page: number, query: string) => {\n    setIsLoading(true)\n    unsplash.search\n      .getPhotos({\n        page: page,\n        perPage: 15,\n        query: query\n      })\n      .then((response: any) => {\n        const newPics = response?.response?.results\n        if (newPics) {\n          setPics(newPics)\n        }\n        setIsLoading(false)\n      })\n  }\n\n  return (\n    <div className='UnsplashImagePickerComponent theme-bg-surface p-4 rounded'>\n      <Modal\n        active={active}\n        setActive={setActive}\n        width='840px'\n        padding={false}\n        className='theme-bg-surface'\n      >\n        <div>\n          <div className='px-4 pt-4 font-bold text-lg theme-bg-surface'>\n            {' '}\n            Search image\n          </div>\n          <div className='shadow p-4 theme-bg-surface'>\n            <div className=''>\n              <SearchBar\n                onSearch={(query: string) => {\n                  console.log(query)\n                  setPics([])\n                  fetchPhotos(1, query)\n                }}\n                query={query}\n                setQuery={setQuery}\n              />\n            </div>\n          </div>\n          <div className='p-4 overflow-y-auto' style={{ maxHeight: '600px' }}>\n            <PhotoList\n              photoList={pics}\n              isLoading={isLoading}\n              loadMore={fetchPhotos}\n              onPhotoSelect={(photo) => {\n                console.log('photo', photo)\n              }}\n            />\n          </div>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { createApi } from 'unsplash-js'\nimport UnsplashImagePickerComponent from './component/unsplash-modal.component'\n\n// export type UnSplashCreateAPI = typeof createApi\ninterface Props {\n  unsplashAccessKey: string\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport const UnsplashImagePicker = ({\n  unsplashAccessKey,\n  active = false,\n  setActive = (_: any) => {}\n}: Props) => {\n  const unsplash = createApi({ accessKey: unsplashAccessKey })\n  return (\n    <UnsplashImagePickerComponent\n      unsplash={unsplash}\n      active={active}\n      setActive={setActive}\n    />\n  )\n}\n"],"names":["Modal","children","className","width","padding","active","setActive","_e","props","React","onClick","onKeyUp","e","key","cx","style","maxHeight","Card","stopPropagation","maxWidth","_","PhotoList","isLoading","photoList","onPhotoSelect","loadMore","InfiniteScroll","pageStart","loader","map","pic","id","src","urls","small","alt","alt_description","color","user","profile_image","username","name","length","setIsLoading","useState","page","setPage","useEffect","callBack","window","innerHeight","scrollY","document","body","offsetHeight","console","log","addEventListener","removeEventListener","SearchBar","setQuery","query","onSearch","searchPhotos","preventDefault","onSubmit","placeholder","type","value","onChange","target","UnsplashImagePickerComponent","unsplash","pics","setPics","fetchPhotos","search","getPhotos","perPage","then","response","newPics","results","photo","UnsplashImagePicker","unsplashAccessKey","createApi","accessKey"],"mappings":"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"}