{"version":3,"file":"index.js","sources":["../src/component/modal.tsx","../src/component/photo-list.component.tsx","../src/component/search-bar.component.tsx","../src/component/unsplash-modal.component.tsx","../src/index.tsx"],"sourcesContent":["import cx from 'classnames'\nimport React from 'react'\n\nexport default function Modal({\n  children,\n  className = '',\n  width = 540,\n  padding = true,\n  active = false,\n  setActive = function (_e: any) {},\n  ...props\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={(_e) => {\n        if (active) {\n          setActive(false)\n        } else {\n          setActive(true)\n        }\n      }}\n      onKeyUp={(e) => {\n        if (e.key === 'Escape') {\n          setActive(false)\n        }\n      }}\n      className={cx(`Modal`, {\n        active: active\n      })}\n      {...props}\n    >\n      <div className='flex' style={{ maxHeight: '90vh' }}>\n        <Card\n          onClick={(e: any) => {\n            // stop the card being closed when we click on inner divs\n            if (active) {\n              e.stopPropagation()\n            }\n          }}\n          padding={padding}\n          className={`overflow-hidden `}\n          style={{ maxWidth: width, width: '100%' }}\n        >\n          {children}\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nfunction Card({\n  children,\n  padding = true,\n  className = '',\n  style = {},\n  onClick = (_: any) => {}\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      style={style}\n      className={cx('Card rounded shadow bg-white mx-auto my-auto', {\n        'p-4': padding\n      })}\n    >\n      {children}\n    </div>\n  )\n}\n","import React from 'react'\n\ninterface Props {\n  isLoading?: boolean\n  photoList: Array<any>\n  onPhotoSelect: (photo: any) => void\n  loadMore: (page: number, query: string) => void\n}\nfunction PhotoList({\n  isLoading = false,\n  photoList,\n  onPhotoSelect,\n  loadMore\n}: Props) {\n  return (\n    <div className=''>\n      <InfiniteScroll\n        pageStart={0}\n        loadMore={loadMore}\n        loader={<p key='0'>Loading more photos...</p>}\n      >\n        {isLoading ? (\n          <div className='flex items-center justify-center h-96'>\n            Loading photos\n          </div>\n        ) : (\n          <div className='card-columns mt-4'>\n            {photoList &&\n              photoList.map((pic: any) => {\n                return (\n                  <div\n                    className='group relative card border-0 mb-2 cursor-pointer'\n                    key={pic.id}\n                    onClick={() => onPhotoSelect(pic)}\n                  >\n                    <img\n                      className='card-img'\n                      src={pic.urls.small}\n                      alt={pic.alt_description}\n                    />\n                    <div\n                      className='absolute top-2 right-1 left-1 invisible group-hover:visible '\n                      style={{ color: 'white' }}\n                    >\n                      <div className='flex items-center justify-between'>\n                        <div className='flex items-center space-x-1'>\n                          <img\n                            className='rounded-full h-6 w-6'\n                            src={pic.user.profile_image.small}\n                            alt={pic.user.username}\n                          />\n                          <h6 className='text-xs'>{pic.user.name}</h6>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n          </div>\n        )}\n        {photoList && photoList.length === 0 && <div className='h-96' />}\n      </InfiniteScroll>\n    </div>\n  )\n}\n\n/**\n * Infinite scroll component\n */\nfunction InfiniteScroll({ pageStart, loadMore, loader, children }: any) {\n  // eslint-disable-next-line no-unused-vars\n  const [isLoading, setIsLoading] = React.useState<boolean>(false)\n  // eslint-disable-next-line no-unused-vars\n  const [page, setPage] = React.useState(pageStart)\n  React.useEffect(() => {\n    const callBack = () => {\n      if (\n        window.innerHeight + window.scrollY + 100 >=\n        document.body.offsetHeight\n      ) {\n        console.log('load more')\n        if (!isLoading) {\n          // loadMoreItems();\n          loadMore(page + 1)\n        }\n      }\n    }\n    window.addEventListener('scroll', callBack)\n    return () => {\n      window.removeEventListener('scroll', callBack)\n    }\n  }, [pageStart])\n\n  return (\n    <div>\n      {children}\n      {isLoading && loader}\n    </div>\n  )\n}\n\nexport default PhotoList\n","import React from 'react'\n\ninterface Props {\n  query: string\n  setQuery: (query: string) => void\n  onSearch: (query: string) => void\n}\nfunction SearchBar({ setQuery, query, onSearch }: Props) {\n  const searchPhotos = async (e: any) => {\n    e.preventDefault()\n    onSearch(query)\n  }\n\n  return (\n    <div>\n      <div>\n        <form onSubmit={searchPhotos} className='flex items-center space-x-2'>\n          <label className=' w-full'>\n            <input\n              className='placeholder:italic placeholder:theme-text-subtitle-1  w-full border theme-border-default rounded-md py-2 pl-3 pr-3  focus:outline-none focus:theme-border-primary  focus:ring-1 sm:text-sm'\n              placeholder='Search for an image'\n              type='text'\n              name='search'\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n            />\n          </label>\n          <span>\n            {/* <Button label={'Search'} onClick={searchPhotos} /> */}\n            <button\n              className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md'\n              type='submit'\n            >\n              Search\n            </button>\n          </span>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SearchBar\n","import React from 'react'\nimport Modal from './modal'\nimport PhotoList from './photo-list.component'\nimport SearchBar from './search-bar.component'\ninterface Props {\n  unsplash: any\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport default function UnsplashImagePickerComponent({\n  unsplash,\n  active = false,\n  setActive = (_: boolean) => {}\n}: Props) {\n  const [pics, setPics] = React.useState<any[]>([])\n  const [query, setQuery] = React.useState('')\n  const [isLoading, setIsLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    fetchPhotos(1, query)\n  }, [])\n\n  const fetchPhotos = (page: number, query: string) => {\n    setIsLoading(true)\n    unsplash.search\n      .getPhotos({\n        page: page,\n        perPage: 15,\n        query: query\n      })\n      .then((response: any) => {\n        const newPics = response?.response?.results\n        if (newPics) {\n          setPics(newPics)\n        }\n        setIsLoading(false)\n      })\n  }\n\n  return (\n    <div className='UnsplashImagePickerComponent theme-bg-surface p-4 rounded'>\n      <Modal\n        active={active}\n        setActive={setActive}\n        width='840px'\n        padding={false}\n        className='theme-bg-surface'\n      >\n        <div>\n          <div className='px-4 pt-4 font-bold text-lg theme-bg-surface'>\n            {' '}\n            Search image\n          </div>\n          <div className='shadow p-4 theme-bg-surface'>\n            <div className=''>\n              <SearchBar\n                onSearch={(query: string) => {\n                  console.log(query)\n                  setPics([])\n                  fetchPhotos(1, query)\n                }}\n                query={query}\n                setQuery={setQuery}\n              />\n            </div>\n          </div>\n          <div className='p-4 overflow-y-auto' style={{ maxHeight: '600px' }}>\n            <PhotoList\n              photoList={pics}\n              isLoading={isLoading}\n              loadMore={fetchPhotos}\n              onPhotoSelect={(photo) => {\n                console.log('photo', photo)\n              }}\n            />\n          </div>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { createApi } from 'unsplash-js'\nimport UnsplashImagePickerComponent from './component/unsplash-modal.component'\n\n// export type UnSplashCreateAPI = typeof createApi\ninterface Props {\n  unsplashAccessKey: string\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport const UnsplashImagePicker = ({\n  unsplashAccessKey,\n  active = false,\n  setActive = (_: any) => {}\n}: Props) => {\n  const unsplash = createApi({ accessKey: unsplashAccessKey })\n  return (\n    <UnsplashImagePickerComponent\n      unsplash={unsplash}\n      active={active}\n      setActive={setActive}\n    />\n  )\n}\n"],"names":["Modal","children","width","padding","active","setActive","_e","props","React","onClick","onKeyUp","e","key","className","cx","style","maxHeight","Card","stopPropagation","maxWidth","_","PhotoList","isLoading","photoList","onPhotoSelect","loadMore","InfiniteScroll","pageStart","loader","map","pic","id","src","urls","small","alt","alt_description","color","user","profile_image","username","name","length","useState","page","useEffect","callBack","window","innerHeight","scrollY","document","body","offsetHeight","console","log","addEventListener","removeEventListener","SearchBar","setQuery","query","onSearch","searchPhotos","preventDefault","onSubmit","placeholder","type","value","onChange","target","UnsplashImagePickerComponent","unsplash","pics","setPics","setIsLoading","fetchPhotos","search","getPhotos","perPage","then","response","newPics","results","photo","UnsplashImagePicker","unsplashAccessKey","createApi","accessKey"],"mappings":"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"}