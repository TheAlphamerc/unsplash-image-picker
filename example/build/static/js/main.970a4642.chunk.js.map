{"version":3,"sources":["../../src/component/modal.tsx","../../src/component/photo-list.component.tsx","../../src/component/search-bar.component.tsx","../../src/component/unsplash-modal.component.tsx","../../src/index.tsx","App.tsx","index.tsx"],"names":["Modal","children","className","width","padding","active","setActive","_e","props","React","onClick","onKeyUp","e","key","cx","style","maxHeight","Card","stopPropagation","maxWidth","_","PhotoList","isLoading","photoList","onPhotoSelect","loadMore","InfiniteScroll","pageStart","loader","map","pic","id","src","urls","small","alt","alt_description","color","user","profile_image","username","name","length","useState","page","useEffect","callBack","window","innerHeight","scrollY","document","body","offsetHeight","console","log","addEventListener","removeEventListener","SearchBar","setQuery","query","onSearch","searchPhotos","preventDefault","onSubmit","placeholder","type","value","onChange","target","UnsplashImagePickerComponent","unsplash","pics","setPics","setIsLoading","fetchPhotos","search","getPhotos","perPage","then","response","newPics","_response$response","results","photo","UnsplashImagePicker","unsplashAccessKey","createApi","accessKey","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.970a4642.chunk.js","sourcesContent":["import cx from 'classnames'\nimport React from 'react'\n\nexport default function Modal({\n  children,\n  className = '',\n  width = 540,\n  padding = true,\n  active = false,\n  setActive = function (_e: any) {},\n  ...props\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={(_e) => {\n        if (active) {\n          setActive(false)\n        } else {\n          setActive(true)\n        }\n      }}\n      onKeyUp={(e) => {\n        if (e.key === 'Escape') {\n          setActive(false)\n        }\n      }}\n      className={cx(`Modal`, {\n        active: active\n      })}\n      {...props}\n    >\n      <div className='flex' style={{ maxHeight: '90vh' }}>\n        <Card\n          onClick={(e: any) => {\n            // stop the card being closed when we click on inner divs\n            if (active) {\n              e.stopPropagation()\n            }\n          }}\n          padding={padding}\n          className={`overflow-hidden `}\n          style={{ maxWidth: width, width: '100%' }}\n        >\n          {children}\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nfunction Card({\n  children,\n  padding = true,\n  className = '',\n  style = {},\n  onClick = (_: any) => {}\n}: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      style={style}\n      className={cx('Card rounded shadow bg-white mx-auto my-auto', {\n        'p-4': padding\n      })}\n    >\n      {children}\n    </div>\n  )\n}\n","import React from 'react'\n\ninterface Props {\n  isLoading?: boolean\n  photoList: Array<any>\n  onPhotoSelect: (photo: any) => void\n  loadMore: (page: number, query: string) => void\n}\nfunction PhotoList({\n  isLoading = false,\n  photoList,\n  onPhotoSelect,\n  loadMore\n}: Props) {\n  return (\n    <div className=''>\n      <InfiniteScroll\n        pageStart={0}\n        loadMore={loadMore}\n        loader={<p key='0'>Loading more photos...</p>}\n      >\n        {isLoading ? (\n          <div className='flex items-center justify-center h-96'>\n            Loading photos\n          </div>\n        ) : (\n          <div className='card-columns mt-4'>\n            {photoList &&\n              photoList.map((pic: any) => {\n                return (\n                  <div\n                    className='group relative card border-0 mb-2 cursor-pointer'\n                    key={pic.id}\n                    onClick={() => onPhotoSelect(pic)}\n                  >\n                    <img\n                      className='card-img'\n                      src={pic.urls.small}\n                      alt={pic.alt_description}\n                    />\n                    <div\n                      className='absolute top-2 right-1 left-1 invisible group-hover:visible '\n                      style={{ color: 'white' }}\n                    >\n                      <div className='flex items-center justify-between'>\n                        <div className='flex items-center space-x-1'>\n                          <img\n                            className='rounded-full h-6 w-6'\n                            src={pic.user.profile_image.small}\n                            alt={pic.user.username}\n                          />\n                          <h6 className='text-xs'>{pic.user.name}</h6>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n          </div>\n        )}\n        {photoList && photoList.length === 0 && <div className='h-96' />}\n      </InfiniteScroll>\n    </div>\n  )\n}\n\n/**\n * Infinite scroll component\n */\nfunction InfiniteScroll({ pageStart, loadMore, loader, children }: any) {\n  // eslint-disable-next-line no-unused-vars\n  const [isLoading, setIsLoading] = React.useState<boolean>(false)\n  // eslint-disable-next-line no-unused-vars\n  const [page, setPage] = React.useState(pageStart)\n  React.useEffect(() => {\n    const callBack = () => {\n      if (\n        window.innerHeight + window.scrollY + 100 >=\n        document.body.offsetHeight\n      ) {\n        console.log('load more')\n        if (!isLoading) {\n          // loadMoreItems();\n          loadMore(page + 1)\n        }\n      }\n    }\n    window.addEventListener('scroll', callBack)\n    return () => {\n      window.removeEventListener('scroll', callBack)\n    }\n  }, [pageStart])\n\n  return (\n    <div>\n      {children}\n      {isLoading && loader}\n    </div>\n  )\n}\n\nexport default PhotoList\n","import React from 'react'\n\ninterface Props {\n  query: string\n  setQuery: (query: string) => void\n  onSearch: (query: string) => void\n}\nfunction SearchBar({ setQuery, query, onSearch }: Props) {\n  const searchPhotos = async (e: any) => {\n    e.preventDefault()\n    onSearch(query)\n  }\n\n  return (\n    <div>\n      <div>\n        <form onSubmit={searchPhotos} className='flex items-center space-x-2'>\n          <label className=' w-full'>\n            <input\n              className='placeholder:italic placeholder:theme-text-subtitle-1  w-full border theme-border-default rounded-md py-2 pl-3 pr-3  focus:outline-none focus:theme-border-primary  focus:ring-1 sm:text-sm'\n              placeholder='Search for an image'\n              type='text'\n              name='search'\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n            />\n          </label>\n          <span>\n            {/* <Button label={'Search'} onClick={searchPhotos} /> */}\n            <button\n              className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md'\n              type='submit'\n            >\n              Search\n            </button>\n          </span>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SearchBar\n","import React from 'react'\nimport Modal from './modal'\nimport PhotoList from './photo-list.component'\nimport SearchBar from './search-bar.component'\ninterface Props {\n  unsplash: any\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport default function UnsplashImagePickerComponent({\n  unsplash,\n  active = false,\n  setActive = (_: boolean) => {}\n}: Props) {\n  const [pics, setPics] = React.useState<any[]>([])\n  const [query, setQuery] = React.useState('')\n  const [isLoading, setIsLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    fetchPhotos(1, query)\n  }, [])\n\n  const fetchPhotos = (page: number, query: string) => {\n    setIsLoading(true)\n    unsplash.search\n      .getPhotos({\n        page: page,\n        perPage: 15,\n        query: query\n      })\n      .then((response: any) => {\n        const newPics = response?.response?.results\n        if (newPics) {\n          setPics(newPics)\n        }\n        setIsLoading(false)\n      })\n  }\n\n  return (\n    <div className='UnsplashImagePickerComponent theme-bg-surface p-4 rounded'>\n      <Modal\n        active={active}\n        setActive={setActive}\n        width='840px'\n        padding={false}\n        className='theme-bg-surface'\n      >\n        <div>\n          <div className='px-4 pt-4 font-bold text-lg theme-bg-surface'>\n            {' '}\n            Search image\n          </div>\n          <div className='shadow p-4 theme-bg-surface'>\n            <div className=''>\n              <SearchBar\n                onSearch={(query: string) => {\n                  console.log(query)\n                  setPics([])\n                  fetchPhotos(1, query)\n                }}\n                query={query}\n                setQuery={setQuery}\n              />\n            </div>\n          </div>\n          <div className='p-4 overflow-y-auto' style={{ maxHeight: '600px' }}>\n            <PhotoList\n              photoList={pics}\n              isLoading={isLoading}\n              loadMore={fetchPhotos}\n              onPhotoSelect={(photo) => {\n                console.log('photo', photo)\n              }}\n            />\n          </div>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { createApi } from 'unsplash-js'\nimport UnsplashImagePickerComponent from './component/unsplash-modal.component'\n\n// export type UnSplashCreateAPI = typeof createApi\ninterface Props {\n  unsplashAccessKey: string\n  active?: boolean\n  setActive?: (active: boolean) => void\n}\n\nexport const UnsplashImagePicker = ({\n  unsplashAccessKey,\n  active = false,\n  setActive = (_: any) => {}\n}: Props) => {\n  const unsplash = createApi({ accessKey: unsplashAccessKey })\n  return (\n    <UnsplashImagePickerComponent\n      unsplash={unsplash}\n      active={active}\n      setActive={setActive}\n    />\n  )\n}\n","import React from 'react'\n\nimport { UnsplashImagePicker } from 'unsplash-image-picker'\nimport 'unsplash-image-picker/dist/index.css'\n\nconst App = () => {\n  const [active, setActive] = React.useState(false)\n  const unsplashAccessKey = 'dTUBUnPASfrsKOWYzVpAwvkr9Ks2MuY3i5YCvSqAxWQ'\n  return (\n    <div className='App flex items-center justify-center'>\n      <button\n        className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded p-42'\n        onClick={() => {\n          setActive(true)\n        }}\n      >\n        Show Picker\n      </button>\n      <UnsplashImagePicker\n        unsplashAccessKey={unsplashAccessKey}\n        active={active}\n        setActive={setActive}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}